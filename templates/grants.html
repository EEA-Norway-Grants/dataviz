{% extends "dataviz.html" %}

{% block top %}
{% endblock %}

{% block main %}
<div class="lg-column">

  <div class="grant-dataviz" id="financial-mechanisms">
  <h2>Funding by financial mechanism</h2>
    <mechanisms
        datasource="{% url "api:grants" %}"
    >
    </mechanisms>
  </div>

  <div class="grant-dataviz" id="priority-sectors">
  <h2>Allocation by priority sector</h2>
    <sectors
        :width="250"
        :height="300"
        datasource="{% url "api:grants" %}"
    >
    </sectors>
  </div>

</div>

<div class="lg-column">
  <div class="grant-dataviz" id="funding-map">
  <h2>Funding map</h2>
    <xmap
      details-datasource="{% url "api:beneficiary-allocation-detail" "XX" %}"
    />
  </div>

  <div class="grant-dataviz" id="beneficiary-states">
  <h2>Funding across beneficiary states</h2>
    <beneficiaries
        :min-height="200"
        datasource="{% url "api:grants" %}"
    >
    </beneficiaries>
  </div>
</div>
{% endblock %}

{% block aside %}
    <div id="sidebar-results">
    <sidebar :initial="data"></sidebar>
    </div>
{% endblock %}

{% block finally %}
<script>
new Vue({
  el: '#financial-mechanisms',
  components: {
      mechanisms: components.Mechanisms,
  },
  data: {
  },
});

new Vue({
  el: '#priority-sectors',
  components: {
      sectors: components.Sectors,
  },
  data: {
  },
});

new Vue({
  el: '#funding-map',
  components: {
      xmap: components.Map,
  },
  data: {
  },
});

new Vue({
  el: '#beneficiary-states',
  components: {
    beneficiaries: components.Beneficiaries,
  },
  data: {
  },
});

new Vue({
  el: '#sidebar-results',
  components: {
    sidebar: components.Sidebar,
  },
  data: {
    data: {
      Total: 1798100000,
      Bilateral: 804600000,
    }
  },
});
</script>
{% endblock %}
